
<page-header [title]="'营收报表'"></page-header>
<nz-card [nzBordered]="false">
    <div nz-form [nzLayout]="'inline'" class="search__form">
        <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
            <nz-col nzMd="8" nzSm="24">
              <jn-stores-infor [nzXs]="7" [moduleId]="moduleId" [ifStoresAll]="ifStoresAll" [ifStoresAuth]="ifStoresAuth"
                                (storeListPush)="storeListPush($event)" (storeIdOutput)="getStoreId($event)"></jn-stores-infor>
            </nz-col>
            <nz-col nzMd="8" nzSm="24" class="fr">
                <nz-form-item>
                    <nz-form-label nzFor="updatedAt">选择日期</nz-form-label>
                    <nz-form-control>
                      <nz-date-picker (ngModelChange)="reportDateAlert($event)" [nzFormat]="'YYYY-MM-DD'" [(ngModel)]="yyyymm"></nz-date-picker>
                    </nz-form-control>
                </nz-form-item>
            </nz-col>
        </nz-row>
    </div>
</nz-card>
<div nz-row [nzGutter]="24">
    <div nz-col nzXs="24" nzSm="24" nzLg="12">
        <nz-card nzTitle="当日营收" [nzBordered]="false" [nzBodyStyle]="{'overflow': 'hidden'}">
            <div class="box-moniter">
                <span class="wenhao">
                    <nz-tooltip [nzTitle]="'当日所有开卡、充值、散客收款的金额总和'" [nzPlacement]="'top'">
                        <a class="iconfont icon-wenhao" nz-tooltip></a>
                    </nz-tooltip>
                </span>
                <div class="divTitle">
                    <div class="divTitleleft">
                        <div class="icon-wallett iconfont"></div>
                    </div>
                    <div class="divTitleright">
                        <p>当日营收</p>
                        <p style="font-size:20px;font-weight:bold">{{todayIncomeItem?.todayOrderAmountSum/100}}元</p>
                    </div>
                </div>
                <div class="tuBox firstTu">
                    <div>
                        周同比
                        <span class="iconfont {{todayIncomeItem?.lastWeekCompare<0?'icon-xiala':'icon-up'}}"></span>
                        {{todayIncomeItemDetail}}% </div>
                    <div>
                        日环比
                        <span class="iconfont {{todayIncomeItem?.yesterdayCompare<0?'icon-xiala':'icon-up'}}"></span>
                        {{yesterdayCompareDetail}}% </div>
                </div>
            </div>
        </nz-card>
    </div>
    <div nz-col nzXs="24" nzSm="24" nzLg="12">
        <nz-card nzTitle="各项营收占比" [nzBordered]="false" class="pie-card">
            <div nz-row [nzGutter]="4" style="padding:16px 0">
                <div nz-col [nzSpan]="8">
                    <g2-pie [animate]="false"
                            [percent]="kaikaPerNum"
                            subTitle="开卡"
                            [total]="kaikaPer"
                            [height]="128"
                            [lineWidth]="2"></g2-pie>
                </div>
                <div nz-col [nzSpan]="8">
                    <g2-pie [animate]="false"
                            color="#5DDECF"
                            [percent]="chongzhiPerNum"
                            subTitle="充值"
                            [total]="chongzhiPer"
                            [height]="128"
                            [lineWidth]="2"></g2-pie>
                </div>
                <div nz-col [nzSpan]="8">
                    <g2-pie [animate]="false"
                            color="#2FC25B"
                            [percent]="sankePerNum"
                            subTitle="散客"
                            [total]="sankePer"
                            [height]="128"
                            [lineWidth]="2"></g2-pie>
                </div>
            </div>
        </nz-card>
    </div>
</div>

<nz-card [nzBordered]="false">
    <nz-table [nzNoResult]="'没有数据'" #basicTable [nzShowPagination]="false" [nzData]="reportOrderList">
        <thead nz-thead class="ui-grid-thead">
            <tr>
                <th nz-th class="" *ngFor="let item of theadName;let i = index">{{item}}</th>
            </tr>
        </thead>
        <tbody nz-tbody class="ui-grid-tbody">
            <tr nz-tbody-tr *ngFor="let item of reportOrderList; let i = index">
                <td style="color: #368ff7">{{item.payDate}}</td>
                <td>{{item.bizTypeName}}</td>
                <td style="width: 300px;">{{item.body}}</td>
                <td>{{item.paidMoney/100}}</td>
            </tr>
        </tbody>
    </nz-table>
    <div class="nzPaginationBox">
        <nz-pagination class="nzPagination" style="float: right;padding: 20px 0" [nzTotal]="totalElements" [nzPageSize]="10" (nzPageIndexChange)="paginate($event)"></nz-pagination>
    </div>
</nz-card>




