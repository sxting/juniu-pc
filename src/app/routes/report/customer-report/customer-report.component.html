
<page-header [title]="'顾客报表'"></page-header>
<nz-card [nzBordered]="false">
  <div nz-form [nzLayout]="'inline'" class="search__form">
    <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
      <nz-col nzMd="8" nzSm="24">
        <jn-stores-infor [nzXs]="7" [moduleId]="moduleId" [ifStoresAll]="ifStoresAll" [ifStoresAuth]="ifStoresAuth"
                         (storeListPush)="storeListPush($event)" (storeIdOutput)="getStoreId($event)"></jn-stores-infor>
      </nz-col>
      <nz-col nzMd="8" nzSm="24" class="fr">
        <nz-form-item>
          <nz-form-label nzFor="updatedAt">选择日期</nz-form-label>
          <nz-form-control>
            <nz-date-picker (ngModelChange)="reportDateAlert($event)" [nzFormat]="'YYYY-MM-DD'" [(ngModel)]="yyyymmDate" [nzAllowClear]="false"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
  </div>
  <!-- echart -->
  <div nz-row [nzGutter]="24" class="gcard-box">
    <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="6" class="gcard">
        <p class="chart-title">当日客流量</p>
        <span class="chart-data">{{currentCount}}</span>
        <div id="chart-left"></div>
        <div class="tip-box">
          <nz-tooltip [nzTitle]="'当日到店消费顾客总数'" [nzPlacement]="'right'">
            <span nz-tooltip class="iconfont icon-wh"></span>
          </nz-tooltip>
        </div>
    </div>
    <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="6" class="gcard">
      <p class="chart-title">会员占比</p>
      <span class="chart-data">{{memberPer}}</span>
      <div id="chart-right"></div>
      <div class="tip-box">
        <nz-tooltip [nzTitle]="'当日到店顾客中会员占比'" [nzPlacement]="'right'">
          <span nz-tooltip class="iconfont icon-wh"></span>
        </nz-tooltip>
      </div>
    </div>
  </div>
</nz-card>

<nz-card [nzBordered]="true">
    <nz-table [nzNoResult]="'没有数据'" #basicTable [nzShowPagination]="false" [nzData]="monthReportListInfor">
        <thead nz-thead class="ui-grid-thead">
            <tr>
                <th nz-th class="" *ngFor="let item of theadName;let i = index">{{item}}</th>
            </tr>
        </thead>
        <tbody nz-tbody class="ui-grid-tbody">
            <tr nz-tbody-tr *ngFor="let item of monthReportListInfor; let i = index">
                <td>{{item.payDate}}</td>
                <td>{{item.customerName}}</td>
                <!--<td>{{item.customerName}}</td>-->
                <td>{{item.type}}</td>
                <td>￥{{item.paidMoney/100}}</td>
            </tr>
        </tbody>
    </nz-table>
    <div class="nzPaginationBox">
        <nz-pagination class="nzPagination" style="float: right;padding: 20px 0" [nzTotal]="totalElements" [nzPageSize]="10" (nzPageIndexChange)="paginate($event)"></nz-pagination>
    </div>
</nz-card>
