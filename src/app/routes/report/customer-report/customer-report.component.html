<page-header [title]="'顾客报表'"></page-header>
<nz-card [nzBordered]="false">
  <div nz-form [nzLayout]="'inline'" class="search__form">
    <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
      <nz-col nzMd="8" nzSm="24">
        <jn-stores-infor [nzXs]="7" [moduleId]="moduleId" [ifStoresAll]="ifStoresAll" [ifStoresAuth]="ifStoresAuth"
                         (storeListPush)="storeListPush($event)" (storeIdOutput)="getStoreId($event)"></jn-stores-infor>
      </nz-col>
      <nz-col nzMd="8" nzSm="24" class="fr">
        <nz-form-item>
          <nz-form-label nzFor="updatedAt">选择日期</nz-form-label>
          <nz-form-control>
            <nz-date-picker (ngModelChange)="reportDateAlert($event)" [nzFormat]="'YYYY-MM-DD'" [(ngModel)]="yyyymmDate" [nzAllowClear]="false"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
  </div>
  <div nz-col nzXs="24" nzSm="12">
    <g2-card [title]="'当日客流量'" [total]="currentCount" contentHeight="46px" [action]="action1">
      <ng-template #action1>
        <nz-tooltip [nzTitle]="'当日到店消费顾客总数'">
          <i nz-tooltip class="anticon anticon-info-circle-o"></i>
        </nz-tooltip>
      </ng-template>
      <g2-mini-area line height="46" [data]="visitDataArr"></g2-mini-area>
    </g2-card>
  </div>
</nz-card>

<div nz-row nzXs="24" nzSm="12" class="card-box">
  <nz-card [nzBordered]="false" class="pie-card card-list">
    <div nz-row [nzGutter]="4" style="padding:16px 0">
      <div class="tip-box">
        <nz-tooltip [nzTitle]="'一段时间内会员消费占顾客消费总数的比例'" [nzPlacement]="'right'">
          <span nz-tooltip class="iconfont icon-wh"></span>
        </nz-tooltip>
      </div>
      <div nz-col [nzSpan]="12">
        <g2-pie
          percent="28"
          subTitle="会员占比"
          [total]="memberPer"
          height="120"></g2-pie>
      </div>
    </div>
  </nz-card>
  <nz-card [nzBordered]="false" class="pie-card card-list">
    <div nz-row [nzGutter]="4" style="padding:16px 0">
      <div class="tip-box">
        <nz-tooltip [nzTitle]="'老客消费占所有消费的比例'" [nzPlacement]="'right'">
          <span nz-tooltip class="iconfont icon-wh"></span>
        </nz-tooltip>
      </div>
      <div nz-col [nzSpan]="12">
        <g2-pie
          percent="28"
          subTitle="老客占比"
          [total]="memberPer"
          height="120"></g2-pie>
      </div>
    </div>
  </nz-card>
  <nz-card [nzBordered]="true" class="pie-card card-list">
    <div nz-row [nzGutter]="4" style="padding:16px 0">
      <div class="tip-box">
        <nz-tooltip [nzTitle]="'女客消费占所有消费的比例'" [nzPlacement]="'right'">
          <span nz-tooltip class="iconfont icon-wh"></span>
        </nz-tooltip>
      </div>
      <div nz-col [nzSpan]="12">
        <g2-pie
          percent="28"
          subTitle="女客占比"
          [total]="memberPer"
          height="120"></g2-pie>
      </div>
    </div>
  </nz-card>
</div>
