<page-header [title]="'跨店结算'"></page-header>
<nz-card [nzBordered]="false">
    <form nz-form [nzLayout]="'inline'" class="search__form">
        <nz-col nzMd="8" nzSm="24">
            <nz-form-item>
                <nz-form-label nzFor="yyyymm">选择日期</nz-form-label>
                <nz-form-control>
                    <input nz-input [(ngModel)]="yyyymm" name="yyyymm" placeholder="请选择日期" id="yyyymm">
                </nz-form-control>
            </nz-form-item>
        </nz-col>
    </form>
</nz-card>
<!--图表-->
<nz-card [nzBordered]="false">
    <nz-table #basicTable [nzShowPagination]="false" [nzData]="settlementInfor">
        <thead nz-thead class="ui-grid-thead">
        <tr>
            <th nz-th class="">序号</th>
            <th nz-th class="">结算门店</th>
            <th nz-th class="" *ngFor="let item of arrTableTitle;let i = index">
                <span>{{item.name}}</span>
                <nz-tooltip [nzTitle]="item.value" [nzPlacement]="'right'">
                    <span nz-tooltip class="iconfont icon-wenhao ml10"></span>
                </nz-tooltip>
            </th>
            <th nz-th class="">交易详情</th>
        </tr>
        </thead>
        <tbody nz-tbody class="ui-grid-tbody">
            <tr nz-tbody-tr>
                <td nz-td>1</td>
                <td nz-td>1</td>
                <td nz-td>1</td>
                <td nz-td>1</td>
                <td nz-td>1</td>
                <td nz-td (click)="checkDetailInfor(checkDetail,'368789')">查看</td>
            </tr>
            <tr nz-tbody-tr *ngFor="let item of settlementInfor;let i = index">
                <td nz-td>{{i+1}}</td>
                <td nz-td>{{item.staffName}}</td>
                <td nz-td>{{item.serviceCount}}</td>
                <td nz-td>{{item.assignRateStaffing}}</td>
                <td nz-td>{{item.serviceCount}}</td>
                <td nz-td (click)="checkDetailInfor(checkDetail, item.serviceIds)" style="color: #1890ff;cursor: pointer">查看</td>
            </tr>
        </tbody>
    </nz-table>
    <div class="nzPaginationBox">
        <nz-pagination class="nzPagination" [nzTotal]="totalElements" [nzPageSize]="10" (nzPageIndexChange)="paginate($event)"></nz-pagination>
    </div>
</nz-card>
<!--点击弹出框-->
<ng-template #checkDetail>
    <div class="reserve-record-alert">
        <form nz-form [nzLayout]="'inline'" class="search__form mb24">
            <nz-row [nzGutter]="{ md: 8, lg: 24, xl: 48 }">
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="status">门店</nz-form-label>
                        <nz-form-control>
                            <nz-select [(ngModel)]="storeId" name="storeList" id="storeList" [nzPlaceHolder]="'全部门店'" [nzShowSearch]="true">
                                <nz-option *ngFor="let i of storeList; let idx = index" [nzLabel]="i.storeName" [nzValue]="idx"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
                <nz-col nzMd="8" nzSm="24">
                    <nz-form-item>
                        <nz-form-label nzFor="status">消费类型</nz-form-label>
                        <nz-form-control>
                            <nz-select [(ngModel)]="consumeType" name="typeOfConsumption" id="typeOfConsumption" [nzPlaceHolder]="'全部类型'" [nzShowSearch]="true">
                                <nz-option *ngFor="let item of typeOfConsumption; let idx = index" [nzLabel]="item.name" [nzValue]="item.value"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </nz-col>
            </nz-row>
        </form>
        <nz-table #nzTable [nzData]="settlementDetailList" [nzShowPagination]="false">
            <thead>
            <tr>
                <th *ngFor="let item of alertTableTitle"><span>{{item}}</span></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of settlementDetailList;let ind = index">
                <td>{{data.staffName || '---'}}</td>
                <td>{{data.phone || '---'}}</td>
                <td>{{data.date}} {{data.time}}</td>
                <td>{{data.productName || '---'}}</td>
                <td>{{data.peopleNumber || '---'}}<span *ngIf="data.peopleNumber">人</span></td>
                <td class="record-candle-btn">{{data.price/100}}</td>
            </tr>
            </tbody>
        </nz-table>
        <div class="nzPaginationBox">
            <nz-pagination class="nzPagination" (nzPageIndexClickChange)="paginateAlert($event)" (nzPageIndexChange)="paginateAlert($event)" [nzPageIndex]="pageNo" [nzTotal]="countPage"></nz-pagination>
        </div>
    </div>
</ng-template>
